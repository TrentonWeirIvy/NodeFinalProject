<!DOCTYPE html>
<html lang="en">
<%- include("./partials/head.ejs") %>

<body>
  <%- include("./partials/nav.ejs") %>

  <div class="container">
    <h2>Courses</h2>

  </div>

  <%- include("./partials/footer.ejs") %>

  <script src="./createTable.js"></script>
  
  <script>
    const setCookie = (id) => {
      sessionStorage.setItem('courseId', id)
    }

    const setUpTable = async () => {
      await axiosGet('./api/courses').then(async courses => {
        const table = await createTable(courses.data);
        const container = document.querySelector('.container');
        table.querySelectorAll('tr').forEach(async row => {
          const id = row.dataset.id;
          row.addEventListener('click', () => {
            setCookie(id);
            window.location.assign(window.location.origin + '/courseForm');
          });
        });
        container.append(table);
      })
        .catch(e => console.error(e));
    }
    setUpTable();
  </script>
  </body>
  
  </html>